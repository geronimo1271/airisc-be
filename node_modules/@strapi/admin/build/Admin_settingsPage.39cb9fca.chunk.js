(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[5895],{25466:function(X,C,t){"use strict";t.d(C,{G4:function(){return $},Te:function(){return ct}});var e=t(90769),r=t(32735),l=t(59407),L=t(9086),c=t.n(L),f=t(90869),T=(M,g)=>({...M,fieldsToPick:g}),D=t(97889),R=t(88423),j=t.n(R),O=t(3040),u=t.n(O),y=t(56236),E=t.n(y);const Z={fieldsToPick:[],formErrors:{},initialData:{},isLoading:!0,modifiedData:{},showHeaderButtonLoader:!1,showHeaderLoader:!0},n=(M,g)=>(0,D.ZP)(M,v=>{switch(g.type){case"GET_DATA_SUCCEEDED":{v.isLoading=!1,v.showHeaderLoader=!1,v.initialData=j()(g.data,M.fieldsToPick),v.modifiedData=j()(g.data,M.fieldsToPick);break}case"ON_CANCEL":{v.modifiedData=M.initialData,v.formErrors={};break}case"ON_CHANGE":{g.inputType==="password"&&!g.value?E()(v.modifiedData,g.keys.split(".")):g.keys.includes("username")&&!g.value?u()(v.modifiedData,g.keys.split("."),null):u()(v.modifiedData,g.keys.split("."),g.value);break}case"ON_SUBMIT":{v.showHeaderButtonLoader=!0;break}case"ON_SUBMIT_SUCCEEDED":{v.initialData=j()(g.data,M.fieldsToPick),v.modifiedData=j()(g.data,M.fieldsToPick),v.showHeaderButtonLoader=!1;break}case"SET_ERRORS":{v.formErrors=g.errors,v.showHeaderButtonLoader=!1;break}default:return v}});var $=(M,g,v,q)=>{const[{formErrors:K,initialData:ut,isLoading:b,modifiedData:Y,showHeaderButtonLoader:nt,showHeaderLoader:mt},Q]=(0,r.useReducer)(n,Z,()=>T(Z,q)),U=(0,l.lm)(),{lockApp:ot,unlockApp:xt}=(0,l.o1)(),{get:Lt,put:ht}=(0,l.kY)();return(0,r.useEffect)(()=>{M&&(async()=>{try{const{data:{data:W}}=await Lt(M);Q({type:"GET_DATA_SUCCEEDED",data:W,fieldsToPick:q})}catch(W){console.error(W.response),U({type:"warning",message:{id:"notification.error"}})}})()},[M]),[{formErrors:K,initialData:ut,isLoading:b,modifiedData:Y,showHeaderButtonLoader:nt,showHeaderLoader:mt},Q,{handleCancel:()=>{Q({type:"ON_CANCEL"})},handleChange:({target:{name:_,value:W,type:A}})=>{Q({type:"ON_CHANGE",inputType:A,keys:_,value:W})},handleSubmit:async _=>{_.preventDefault();const W=await(0,f.R6)(Y,g);if(Q({type:"SET_ERRORS",errors:W||{}}),!W)try{ot(),Q({type:"ON_SUBMIT"});const A=c()(Y,["confirmPassword","registrationToken"]);A.roles&&(A.roles=A.roles.map(gt=>gt.id)),A.ssoLockedRoles&&(A.ssoLockedRoles=[...new Set(A.ssoLockedRoles)]);const{data:{data:G}}=await ht(M,A);v(G),Q({type:"ON_SUBMIT_SUCCEEDED",data:G}),U({type:"success",message:{id:"notification.success.saved"}})}catch(A){const G=A?.response?.payload??{data:{}};G?.data&&typeof G.data=="string"?U({type:"warning",message:G.data}):U({type:"warning",message:G.message});const gt=(0,f.Iz)(G);Q({type:"SET_ERRORS",errors:gt})}finally{xt()}},setField:(_,W)=>{Q({type:"ON_CHANGE",keys:_,value:W})}}]},et=t(15062),at=t(30305),rt=t(40957);const ft={global:[{intlLabel:{id:"Settings.application.title",defaultMessage:"Overview"},to:"/settings/application-infos",id:"000-application-infos",permissions:[]},{intlLabel:{id:"Settings.webhooks.title",defaultMessage:"Webhooks"},to:"/settings/webhooks",id:"webhooks"},{intlLabel:{id:"Settings.apiTokens.title",defaultMessage:"API Tokens"},to:"/settings/api-tokens?sort=name:ASC",id:"api-tokens"},{intlLabel:{id:"Settings.transferTokens.title",defaultMessage:"Transfer Tokens"},to:"/settings/transfer-tokens?sort=name:ASC",id:"transfer-tokens"}],admin:[{intlLabel:{id:"global.roles",defaultMessage:"Roles"},to:"/settings/roles",id:"roles"},{intlLabel:{id:"global.users"},to:"/settings/users?pageSize=10&page=1&sort=firstname",id:"users"}]};var H=M=>M.map(g=>{const v=g.links.map(q=>({...q,isDisplayed:!1}));return{...g,links:v}}),st=t(98978),V=t.n(st),vt=M=>V()(M,g=>g.id),ct=()=>{const[{isLoading:M,menu:g},v]=(0,r.useState)({isLoading:!0,menu:[]}),{allPermissions:q}=(0,l.vn)(),{shouldUpdateStrapi:K}=(0,l.L7)(),{settings:ut}=(0,l.j1)(),b=(0,et.v9)(at._),{global:Y,admin:nt}=(0,rt.c)(ft,async()=>(await t.e(918).then(t.bind(t,50918))).LINKS_EE,{combine(U,ot){return{admin:[...ot.admin,...U.admin],global:[...U.global,...ot.global]}},defaultValue:{admin:[],global:[]}}),mt=(0,r.useCallback)(U=>{if(!U.id)throw new Error("The settings menu item must have an id attribute.");return{...U,permissions:b.settings?.[U.id]?.main}},[b.settings]);(0,r.useEffect)(()=>{const U=async()=>{const Ct=await(yt=>Promise.all(yt.reduce((it,Et,_)=>{const W=A=>A.map(async(G,gt)=>({hasPermission:await(0,l.qX)(q,G.permissions),sectionIndex:_,linkIndex:gt}));return[...it,...W(Et.links)]},[])))(Lt);v(yt=>({...yt,isLoading:!1,menu:Lt.map((it,Et)=>({...it,links:it.links.map((_,W)=>{const A=Ct.find(G=>G.sectionIndex===Et&&G.linkIndex===W);return{..._,isDisplayed:Boolean(A.hasPermission)}})}))}))},{global:ot,...xt}=ut,Lt=H([{...ut.global,links:vt([...ut.global.links,...Y.map(mt)]).map(ht=>({...ht,hasNotification:ht.id==="000-application-infos"&&K}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:nt.map(mt)},...Object.values(xt)]);U()},[nt,Y,q,ut,K,mt]);const Q=U=>({...U,links:U.links.filter(ot=>ot.isDisplayed)});return{isLoading:M,menu:g.map(Q)}}},90769:function(X,C,t){"use strict";t.d(C,{G:function(){return L}});var e=t(32735),r=t(59407),l=t(20108);function L(){const{get:c}=(0,r.kY)(),{formatAPIError:f}=(0,r.So)(),h=(0,r.lm)(),T=(0,l.useQueries)(["components","content-types"].map(y=>({queryKey:["content-manager",y],async queryFn(){const{data:{data:E}}=await c(`/content-manager/${y}`);return E},onError(E){h({type:"warning",message:f(E)})}}))),[D,R]=T,j=D.isLoading||R.isLoading,O=e.useMemo(()=>(R?.data??[]).filter(y=>y.kind==="collectionType"&&y.isDisplayed),[R?.data]),u=e.useMemo(()=>(R?.data??[]).filter(y=>y.kind!=="collectionType"&&y.isDisplayed),[R?.data]);return{isLoading:j,components:e.useMemo(()=>D?.data??[],[D?.data]),collectionTypes:O,singleTypes:u}}},87211:function(X,C,t){"use strict";t.r(C),t.d(C,{SettingsPage:function(){return Ce}});var e=t(32735),r=t(99226),l=t(59407),L=t(74758),c=t(67879),f=t(53038),h=t(25466),T=t(40957),D=t(63602),R=t(18805),j=t(7141),O=t(65352),u=t(36473),y=t(88791),E=t(89274),Z=t(60216),n=t.n(Z),N=t(14911);const $=({menu:a})=>{const{formatMessage:o}=(0,c.Z)(),{trackUsage:i}=(0,l.rS)(),{pathname:s}=(0,f.TH)(),S=a.filter(m=>!m.links.every(d=>d.isDisplayed===!1)).map(m=>({...m,title:m.intlLabel,links:m.links.map(d=>({...d,title:d.intlLabel,name:d.id}))})),P=o({id:"global.settings",defaultMessage:"Settings"}),x=(m=null)=>{i("willNavigate",{from:s,to:m})};return e.createElement(j.m,{ariaLabel:P},e.createElement(O.p,{label:P}),e.createElement(u.Z,null,S.map(m=>e.createElement(y.D,{key:m.id,label:o(m.intlLabel)},m.links.map(d=>e.createElement(E.E,{as:N.OL,withBullet:d.hasNotification,to:d.to,onClick:()=>x(d.to),key:d.id},o(d.intlLabel)))))))};$.propTypes={menu:n().array.isRequired};var et=$;const at=[{async Component(){return await t.e(3455).then(t.bind(t,32239))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(2544)]).then(t.bind(t,15570))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(2544)]).then(t.bind(t,15570))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(2544)]).then(t.bind(t,87056))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(5199).then(t.bind(t,25691))},to:"/settings/users",exact:!0},{async Component(){return await t.e(4263).then(t.bind(t,28363))},to:"/settings/users/:id",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,5722))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,63939))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(4121).then(t.bind(t,80290))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(8056).then(t.bind(t,22614))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(570),t.e(2225),t.e(4299)]).then(t.bind(t,79494))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(570),t.e(2225),t.e(92)]).then(t.bind(t,77238))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(570),t.e(1049),t.e(4816)]).then(t.bind(t,7360))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(9600).then(t.bind(t,51318))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(570),t.e(1049),t.e(2492)]).then(t.bind(t,66523))},to:"/settings/transfer-tokens/:id",exact:!0}];var rt=t(95162),ft=t(35547),dt=t(64092),H=t(91779),st=t(56932),V=t(84642),z=t(8365),vt=t(10710),w=t(97037),ct=t(84458),M=t(40501),g=t(95441),v=t(20108),q=t(15062),K=t(60505),ut=t(30305),b=t(77981);const Y=750,nt=100,mt=["image/jpeg","image/png","image/svg+xml"];var Q=t(84001),U=t(22765),ot=t(14763),xt=t(92455),Lt=t(82064),ht=t(69321),Ct=t(21223),yt=t(98887),it=t(97889);const Et={localImage:void 0};var W=(a=Et,o)=>(0,it.ZP)(a,i=>{switch(o.type){case"SET_LOCAL_IMAGE":{i.localImage=o.value;break}default:return i}});const A=({onChangeLogo:a,customLogo:o,goTo:i,Component:s,modalTitle:p,next:S,prev:P,currentStep:x})=>{const[{localImage:m},d]=(0,e.useReducer)(W,Et),{formatMessage:F}=(0,c.Z)(),I=k=>{d({type:"SET_LOCAL_IMAGE",value:k})},J=()=>{i(null)};return x?e.createElement(Ct.P,{labelledBy:"modal",onClose:J},e.createElement(yt.x,null,e.createElement(z.Z,{fontWeight:"bold",as:"h2",id:"modal"},F(p))),e.createElement(s,{setLocalImage:I,goTo:i,next:S,prev:P,onClose:J,asset:m||o,onChangeLogo:a})):null};A.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},A.propTypes={Component:n().elementType,currentStep:n().string,customLogo:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}),goTo:n().func.isRequired,modalTitle:n().shape({id:n().string,defaultMessage:n().string}),next:n().string,onChangeLogo:n().func.isRequired,prev:n().string};var G=A;const gt={currentStep:void 0};var Kt=(a=gt,o)=>(0,it.ZP)(a,i=>{switch(o.type){case"GO_TO":{i.currentStep=o.to;break}default:return i}}),Gt=t(49854),Mt=t(89599),Ht=t(2775),St=t(8623),Vt=t(37561),bt=t(750),Yt=t(18129),Qt=t(15667),Tt=t(74973),Xt=t(9047),Jt=t(8471);const kt={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},jt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},wt=a=>new Promise(o=>{const i=new FileReader;i.onload=()=>{const s=new Image;s.onload=function(){o({width:s.width,height:s.height})},s.src=i.result},i.readAsDataURL(a)}),qt=(a,o)=>({ext:a.name.split(".").pop(),size:a.size/1e3,name:a.name,url:URL.createObjectURL(a),rawFile:a,width:o.width,height:o.height}),zt=async a=>{let o;if(!mt.includes(a.type))throw o=new Error("File format"),o.displayMessage=kt,o;const s=await wt(a);if(!(s.width<=Y&&s.height<=Y))throw o=new Error("File sizing"),o.displayMessage=jt,o;const S=qt(a,s);if(!(S.size<=nt))throw o=new Error("File sizing"),o.displayMessage=jt,o;return S},_t=(0,Jt.ZP)(Vt._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,Rt=({setLocalImage:a,goTo:o,next:i,onClose:s})=>{const{formatMessage:p}=(0,c.Z)(),[S,P]=(0,e.useState)(!1),[x,m]=(0,e.useState)(void 0),d=(0,e.useRef)(null),F=()=>P(!0),I=()=>P(!1),J=lt=>{lt.preventDefault(),d.current.click()},k=async()=>{I();const lt=d.current.files[0];if(lt)try{const pt=await zt(lt);a(pt),o(i)}catch(pt){if(pt.displayMessage)m(p(pt.displayMessage,{size:nt,dimension:Y})),d.current.focus();else throw pt}},tt=()=>S?"primary500":x?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(b.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(bt.g,{name:"logo-upload",error:x},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(V.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(V.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:S?"primary100":"neutral100",borderColor:tt(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:F,onDragLeave:I},e.createElement(Yt.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Xt.Z,"aria-hidden":!0}),e.createElement(b.x,{paddingTop:3,paddingBottom:5},e.createElement(z.Z,{variant:"delta",as:"span"},p({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(_t,{accept:mt,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:k,ref:d,id:"logo-upload"}),e.createElement(H.z,{type:"button",onClick:J},p({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(b.x,{paddingTop:6},e.createElement(z.Z,{variant:"pi",textColor:"neutral600"},p({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:nt,dimension:Y})))),e.createElement(Qt.c,null)))))),e.createElement(Tt.m,{startActions:e.createElement(H.z,{onClick:s,variant:"tertiary"},p({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};Rt.defaultProps={next:null},Rt.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};var te=Rt,ee=t(2846),ne=async a=>{try{const{get:o}=(0,l.tg)(),i=await o(a,{responseType:"blob",timeout:8e3});return new File([i.data],i.config.url,{type:i.headers["content-type"]})}catch(o){throw o.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},o}};const Dt=({goTo:a,next:o,onClose:i,setLocalImage:s})=>{const{formatMessage:p}=(0,c.Z)(),[S,P]=(0,e.useState)(""),[x,m]=(0,e.useState)(null),d=I=>{P(I.target.value)},F=async()=>{try{const I=await ne(S),J=await zt(I);s(J),a(o)}catch(I){if(I.displayMessage)m(p(I.displayMessage,{size:nt,dimension:Y}));else throw I}};return e.createElement("form",{onSubmit:I=>{I.preventDefault(),F()}},e.createElement(b.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(ee.o,{label:p({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:x,onChange:d,value:S,name:"logo-url"})),e.createElement(Tt.m,{startActions:e.createElement(H.z,{onClick:i,variant:"tertiary"},p({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(H.z,{type:"submit"},p({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};Dt.defaultProps={next:null},Dt.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};var oe=Dt;const Ot=({setLocalImage:a,goTo:o,next:i,onClose:s})=>{const{formatMessage:p}=(0,c.Z)();return e.createElement(Gt.v,{label:p({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(b.x,{paddingLeft:8,paddingRight:8},e.createElement(Mt.m,null,e.createElement(Mt.O,null,p({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(Mt.O,null,p({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(Ht.i,null)),e.createElement(St.n,null,e.createElement(St.x,null,e.createElement(te,{onClose:s,setLocalImage:a,goTo:o,next:i})),e.createElement(St.x,null,e.createElement(oe,{onClose:s,setLocalImage:a,goTo:o,next:i}))))};Ot.defaultProps={next:null},Ot.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};var ae=Ot,se=t(49758),ie=t(92626),le=t(55454),re=t(74030),de=t(11682),Ut=t(30659),ce=t(50162);const Ft=({asset:a})=>{const{formatMessage:o}=(0,c.Z)();return e.createElement(se.Z,null,e.createElement(ie.O,null,e.createElement(le.H,{size:"S",src:a.url})),e.createElement(re.e,null,e.createElement(de.a,null,e.createElement(Ut.l,null,a.name),e.createElement(Ut._,null,`${a.ext.toUpperCase()} - ${a.width}\u2715${a.height}`)),e.createElement(ce.E,null,o({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};Ft.propTypes={asset:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}).isRequired};var ue=Ft;const Pt=({onClose:a,asset:o,prev:i,next:s,goTo:p,setLocalImage:S,onChangeLogo:P})=>{const{formatMessage:x}=(0,c.Z)(),m=()=>{S(void 0),p(i)},d=()=>{P(o),p(s)};return e.createElement(e.Fragment,null,e.createElement(b.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(V.k,{justifyContent:"space-between",paddingBottom:6},e.createElement(V.k,{direction:"column",alignItems:"flex-start"},e.createElement(z.Z,{variant:"pi",fontWeight:"bold"},x({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(z.Z,{variant:"pi",textColor:"neutral500"},x({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(H.z,{onClick:m,variant:"secondary"},x({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(b.x,{maxWidth:(0,l.Q1)(180)},o.url?e.createElement(ue,{asset:o}):null)),e.createElement(Tt.m,{startActions:e.createElement(H.z,{onClick:a,variant:"tertiary"},x({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(H.z,{onClick:d},x({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};Pt.defaultProps={next:null,prev:null},Pt.propTypes={goTo:n().func.isRequired,asset:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}).isRequired,next:n().string,onClose:n().func.isRequired,onChangeLogo:n().func.isRequired,prev:n().string,setLocalImage:n().func.isRequired};var me=Pt,ge={upload:{Component:ae,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:me,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}};const It=({canUpdate:a,customLogo:o,defaultLogo:i,hint:s,label:p,onChangeLogo:S,onResetLogo:P})=>{const[{currentStep:x},m]=(0,e.useReducer)(Kt,gt),{Component:d,next:F,prev:I,modalTitle:J}=ge[x]||{},{formatMessage:k}=(0,c.Z)(),tt=lt=>{m({type:"GO_TO",to:lt})};return e.createElement(e.Fragment,null,e.createElement(Q.F,{label:p,selectedSlide:0,hint:s,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:o?.name||"logo.png",actions:e.createElement(U.b,null,e.createElement(ot.h,{disabled:!a,onClick:()=>tt(o?"pending":"upload"),label:k({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(Lt.Z,null)}),o&&e.createElement(ot.h,{disabled:!a,onClick:P,label:k({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(ht.Z,null)}))},e.createElement(xt.q,{label:k({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(b.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:o?.url||i,alt:k({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement(G,{Component:d,currentStep:x,onChangeLogo:S,customLogo:o,goTo:tt,next:F,prev:I,modalTitle:J}))};It.defaultProps={canUpdate:!1,customLogo:null,hint:null},It.propTypes={canUpdate:n().bool,customLogo:n().shape({url:n().string,name:n().string}),label:n().string.isRequired,hint:n().string,defaultLogo:n().string.isRequired,onChangeLogo:n().func.isRequired,onResetLogo:n().func.isRequired};var Zt=It,pe=t(86349),fe=t.n(pe),he=(a,o)=>fe()(a,{menuLogo:{display:o.menuLogo},authLogo:{display:o.authLogo}});const At={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}};var Ee=(a=At,o)=>(0,it.ZP)(a,i=>{switch(o.type){case"SET_CUSTOM_MENU_LOGO":{i.menuLogo.display=o.value,i.menuLogo.submit.rawFile=o.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{i.authLogo.display=o.value,i.authLogo.submit.rawFile=o.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{i.menuLogo.display=null,i.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{i.authLogo.display=null,i.authLogo.submit={rawFile:null,isReset:!0};break}default:return i}});const Bt=(0,e.forwardRef)(({canUpdate:a,projectSettingsStored:o},i)=>{const{formatMessage:s}=(0,c.Z)(),{trackUsage:p}=(0,l.rS)(),{logos:{menu:S,auth:P}}=(0,K.m)(),[{menuLogo:x,authLogo:m},d]=(0,e.useReducer)(Ee,At,()=>he(At,o)),F=tt=>{d({type:"SET_CUSTOM_MENU_LOGO",value:tt})},I=()=>{p("didClickResetLogo",{logo:"menu"}),d({type:"RESET_CUSTOM_MENU_LOGO"})},J=tt=>{d({type:"SET_CUSTOM_AUTH_LOGO",value:tt})},k=()=>{p("didClickResetLogo",{logo:"auth"}),d({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,e.useImperativeHandle)(i,()=>({getValues:()=>({menuLogo:x.submit,authLogo:m.submit})})),e.createElement(b.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(z.Z,{variant:"delta",as:"h3"},s({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(z.Z,{variant:"pi",textColor:"neutral600"},s({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:Y,size:nt})),e.createElement(vt.r,{paddingTop:4,gap:4},e.createElement(w.P,{col:6,s:12},e.createElement(Zt,{canUpdate:a,customLogo:x.display,defaultLogo:S.default,hint:s({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:s({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:F,onResetLogo:I})),e.createElement(w.P,{col:6,s:12},e.createElement(Zt,{canUpdate:a,customLogo:m.display,defaultLogo:P.default,hint:s({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:s({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:J,onResetLogo:k}))))});Bt.defaultProps={canUpdate:!1,projectSettingsStored:null},Bt.propTypes={canUpdate:n().bool,projectSettingsStored:n().shape({menuLogo:n().shape({url:n().string,name:n().string})})};var ve=Bt,Le=a=>{const o=new FormData;return Object.entries(a).forEach(([i,s])=>{s&&s.rawFile instanceof File&&o.append(i,s.rawFile),s&&s.isReset&&o.append(i,null)}),o};const ye=()=>null;var xe=()=>{const a=e.useRef(),o=(0,l.lm)(),{trackUsage:i}=(0,l.rS)(),{formatMessage:s}=(0,c.Z)(),{get:p,post:S}=(0,l.kY)(),{updateProjectSettings:P}=(0,K.m)(),x=(0,q.v9)(ut._),{formatAPIError:m}=(0,l.So)(),{communityEdition:d,latestStrapiReleaseTag:F,nodeVersion:I,shouldUpdateStrapi:J,strapiVersion:k}=(0,l.L7)(),tt=(0,T.c)(ye,async()=>(await t.e(502).then(t.bind(t,50502))).AdminSeatInfoEE),{allowedActions:{canRead:lt,canUpdate:pt}}=(0,l.ss)(x.settings["project-settings"]);(0,l.go)();const{data:Nt,isLoading:Me}=(0,v.useQuery)(["project-settings"],async()=>{const{data:B}=await p("/admin/project-settings");return B},{cacheTime:0,enabled:lt,select(B){return{...B,authLogo:B.authLogo?{...B.authLogo,url:(0,l.CR)(B.authLogo.url)}:B.authLogo,menuLogo:B.menuLogo?{...B.menuLogo,url:(0,l.CR)(B.menuLogo.url)}:B.menuLogo}}}),Se=(0,v.useMutation)(B=>S("/admin/project-settings",B,{headers:{"Content-Type":"multipart/form-data"}}),{onError(B){o({type:"warning",message:m(B)})},async onSuccess(B){const{menuLogo:Wt,authLogo:$t}=B;P({menuLogo:Wt?.url,authLogo:$t?.url}),Wt?.rawFile&&i("didChangeLogo",{logo:"menu"}),$t?.rawFile&&i("didChangeLogo",{logo:"auth"}),o({type:"success",message:s({id:"app",defaultMessage:"Saved"})})}}),Te=B=>{B.preventDefault(),Se.mutate(Le(a.current.getValues()))};return tt?e.createElement(r.A,null,e.createElement(l.SL,{name:"Application"}),e.createElement(rt.o,null,Me?e.createElement(ft.a,null,s({id:"Settings.application.isLoading",defaultMessage:"Loading"})):e.createElement("form",{onSubmit:Te},e.createElement(dt.T,{title:s({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:s({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:pt&&e.createElement(H.z,{type:"submit",startIcon:e.createElement(M.Z,null)},s({id:"global.save",defaultMessage:"Save"}))}),e.createElement(st.D,null,e.createElement(V.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(V.k,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(z.Z,{variant:"delta",as:"h3"},s({id:"global.details",defaultMessage:"Details"})),e.createElement(vt.r,{gap:5,as:"dl"},e.createElement(w.P,{col:6,s:12},e.createElement(z.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},s({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(V.k,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(z.Z,null,"v",k),J&&e.createElement(ct.r,{href:`https://github.com/strapi/strapi/releases/tag/${F}`,isExternal:!0,endIcon:e.createElement(g.Z,null)},s({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})))),e.createElement(w.P,{col:6,s:12},e.createElement(z.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},s({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(V.k,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(z.Z,null,s({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:d})),e.createElement(ct.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(g.Z,null)},s({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(w.P,{col:6,s:12},e.createElement(z.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},s({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(z.Z,{as:"dd"},I)),e.createElement(tt,null))),lt&&Nt&&e.createElement(ve,{canUpdate:pt,ref:a,projectSettingsStored:Nt})))))):null};function Ce(){const{settingId:a}=(0,f.UO)(),{settings:o}=(0,l.j1)(),{formatMessage:i}=(0,c.Z)(),{isLoading:s,menu:p}=(0,h.Te)(),S=(0,T.c)(at,async()=>(await t.e(3483).then(t.bind(t,11009))).ROUTES_EE,{combine(m,d){return[...m,...d]},defaultValue:[]}),P=e.useMemo(()=>(0,R.Z)(S.map(({to:m,Component:d,exact:F})=>(0,D.Z)(d,m,F))),[S]),x=Object.values(o).flatMap(m=>{const{links:d}=m;return d.map(F=>(0,D.Z)(F.Component,F.to,F.exact||!1))});return s?e.createElement(l.dO,null):a?e.createElement(r.A,{sideNav:e.createElement(et,{menu:p})},e.createElement(L.q,{title:i({id:"global.settings",defaultMessage:"Settings"})}),e.createElement(f.rs,null,e.createElement(f.AW,{path:"/settings/application-infos",component:xe,exact:!0}),P,x)):e.createElement(f.l_,{to:"/settings/application-infos"})}},56236:function(X,C,t){var e=t(69386);function r(l,L){return l==null?!0:e(l,L)}X.exports=r},99226:function(X,C,t){"use strict";t.d(C,{A:function(){return f}});var e=t(74512),r=t(8471),l=t(77981);const L=(0,r.ZP)(l.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:h})=>h?"auto 1fr":"1fr"};
`,c=(0,r.ZP)(l.x)`
  overflow-x: hidden;
`,f=({sideNav:h,children:T})=>(0,e.jsxs)(L,{hasSideNav:Boolean(h),children:[h,(0,e.jsx)(c,{paddingBottom:10,children:T})]})},84458:function(X,C,t){"use strict";t.d(C,{r:function(){return j}});var e=t(74512),r=t(32735),l=t(95441),L=t(14911),c=t(8471),f=t(59619),h=t(8365),T=t(77981);const D=c.ZP.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:O})=>O?"none":void 0};
  color: ${({disabled:O,theme:u})=>O?u.colors.neutral600:u.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${h.Z} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:O})=>O.colors.primary500};
  }

  &:active {
    color: ${({theme:O})=>O.colors.primary700};
  }

  ${f.BF};
`,R=(0,c.ZP)(T.x)`
  display: flex;
`,j=r.forwardRef(({children:O,href:u,to:y,disabled:E=!1,startIcon:Z,endIcon:n,...N},$)=>{const et=u?"_blank":void 0,at=u?"noreferrer noopener":void 0;return(0,e.jsxs)(D,{as:y&&!E?L.OL:"a",target:et,rel:at,to:E?void 0:y,href:E?"#":u,disabled:E,ref:$,...N,children:[Z&&(0,e.jsx)(R,{as:"span","aria-hidden":!0,paddingRight:2,children:Z}),(0,e.jsx)(h.Z,{children:O}),n&&!u&&(0,e.jsx)(R,{as:"span","aria-hidden":!0,paddingLeft:2,children:n}),u&&(0,e.jsx)(R,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,e.jsx)(l.Z,{})})]})})},7141:function(X,C,t){"use strict";t.d(C,{m:function(){return f}});var e=t(74512),r=t(8471),l=t(10710);const L=`${232/16}rem`,c=(0,r.ZP)(l.r)`
  width: ${L};
  background: ${({theme:h})=>h.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:h})=>h.colors.neutral200};
  z-index: 1;
`,f=({ariaLabel:h,...T})=>(0,e.jsx)(c,{"aria-label":h,as:"nav",...T})},65352:function(X,C,t){"use strict";t.d(C,{p:function(){return Z}});var e=t(74512),r=t(32735),l=t(17229),L=t(8471),c=t(56374),f=t(37808);const h=n=>{const N=(0,r.useRef)();return(0,r.useEffect)(()=>{N.current=n}),N.current};var T=t(2775),D=t(77981),R=t(56116),j=t(41604),O=t(84642),u=t(8365),y=t(14763);const E=(0,L.ZP)(T.i)`
  width: ${24/16}rem;
  background-color: ${({theme:n})=>n.colors.neutral200};
`,Z=({as:n="h2",label:N,searchLabel:$="",searchable:et=!1,onChange:at=()=>{},value:rt="",onClear:ft=()=>{},onSubmit:dt=()=>{},id:H})=>{const[st,V]=(0,r.useState)(!1),z=h(st),vt=(0,f.M)(H),w=(0,r.useRef)(void 0),ct=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{st&&w.current&&w.current.focus(),z&&!st&&ct.current&&ct.current.focus()},[st,z]);const M=()=>{V(K=>!K)},g=K=>{ft(K),w.current.focus()},v=K=>{K.relatedTarget?.id!==vt&&V(!1)},q=K=>{K.key===c.y.ESCAPE&&V(!1)};return st?(0,e.jsxs)(D.x,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,e.jsx)(R.U,{children:(0,e.jsx)(j.w,{name:"searchbar",value:rt,onChange:at,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:q,ref:w,onBlur:v,onClear:g,onSubmit:dt,clearLabel:"Clear",size:"S",children:$})}),(0,e.jsx)(D.x,{paddingLeft:2,paddingTop:4,children:(0,e.jsx)(E,{})})]}):(0,e.jsxs)(D.x,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,e.jsxs)(O.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,e.jsx)(u.Z,{variant:"beta",as:n,children:N}),et&&(0,e.jsx)(y.h,{ref:ct,onClick:M,label:$,icon:(0,e.jsx)(l.Z,{})})]}),(0,e.jsx)(D.x,{paddingTop:4,children:(0,e.jsx)(E,{})})]})}},89274:function(X,C,t){"use strict";t.d(C,{E:function(){return O}});var e=t(74512),r=t(32735),l=t(48715),L=t(8471),c=t(77981),f=t(8365),h=t(84642),T=t(42561);const D=(0,L.ZP)(c.x)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:u})=>u.colors.neutral800};
  svg > * {
    fill: ${({theme:u})=>u.colors.neutral600};
  }

  &.active {
    ${({theme:u})=>`
      background-color: ${u.colors.primary100};
      border-right: 2px solid ${u.colors.primary600};
      svg > * {
        fill: ${u.colors.primary700};
      }
      ${f.Z} {
        color: ${u.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,R=(0,L.ZP)(l.Z)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:u,$active:y})=>y?u.colors.primary600:u.colors.neutral600};
  }
`,j=L.ZP.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,O=r.forwardRef(({children:u,icon:y=null,withBullet:E=!1,as:Z=T.f,isSubSectionChild:n=!1,...N},$)=>(0,e.jsxs)(D,{as:Z,icon:y,background:"neutral100",paddingLeft:n?9:7,paddingBottom:2,paddingTop:2,ref:$,...N,children:[(0,e.jsxs)(h.k,{children:[y?(0,e.jsx)(j,{children:y}):(0,e.jsx)(R,{}),(0,e.jsx)(c.x,{paddingLeft:2,children:(0,e.jsx)(f.Z,{as:"span",children:u})})]}),E&&(0,e.jsx)(c.x,{as:h.k,paddingRight:4,children:(0,e.jsx)(R,{$active:!0})})]}))},88791:function(X,C,t){"use strict";t.d(C,{D:function(){return y}});var e=t(74512),r=t(32735),l=t(8471),L=t(91917),c=t(84642),f=t(77981),h=t(8365);const T=(0,l.ZP)(c.k)`
  border: none;
  padding: 0;
  background: transparent;
`,D=l.ZP.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:E})=>E?"0deg":"180deg"});
`,R=({collapsable:E=!1,label:Z,onClick:n=()=>{},ariaExpanded:N,ariaControls:$})=>E?(0,e.jsxs)(T,{as:"button",onClick:n,"aria-expanded":N,"aria-controls":$,textAlign:"left",children:[(0,e.jsx)(f.x,{paddingRight:1,children:(0,e.jsx)(h.Z,{variant:"sigma",textColor:"neutral600",children:Z})}),E&&(0,e.jsx)(D,{rotated:N,children:(0,e.jsx)(L.Z,{"aria-hidden":!0})})]}):(0,e.jsx)(T,{children:(0,e.jsx)(f.x,{paddingRight:1,children:(0,e.jsx)(h.Z,{variant:"sigma",textColor:"neutral600",children:Z})})});var j=t(37808),O=t(14298);const u=(0,l.ZP)(f.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:E})=>E.colors.neutral500};
    }
  }
`,y=({collapsable:E=!1,label:Z,badgeLabel:n,children:N,id:$})=>{const[et,at]=(0,r.useState)(!0),rt=(0,j.M)($),ft=()=>{at(dt=>!dt)};return(0,e.jsxs)(c.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,e.jsx)(u,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,e.jsxs)(f.x,{position:"relative",paddingRight:n?6:0,children:[(0,e.jsx)(R,{onClick:ft,ariaExpanded:et,ariaControls:rt,collapsable:E,label:Z}),n&&(0,e.jsx)(O.C,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:n})]})}),(!E||et)&&(0,e.jsx)("ol",{id:rt,children:r.Children.map(N,(dt,H)=>(0,e.jsx)("li",{children:dt},H))})]})}},36473:function(X,C,t){"use strict";t.d(C,{Z:function(){return c}});var e=t(74512),r=t(32735),l=t(77981),L=t(84642);const c=({children:f,spacing:h=2,horizontal:T=!1,...D})=>(0,e.jsx)(l.x,{paddingTop:2,paddingBottom:4,children:(0,e.jsx)(L.k,{as:"ol",gap:h,direction:T?"row":"column",alignItems:T?"center":"stretch",...D,children:r.Children.map(f,(R,j)=>(0,e.jsx)("li",{children:R},j))})})},48715:function(X,C,t){"use strict";t.d(C,{Z:function(){return l}});var e=t(74512);const r=L=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 4 4",...L,children:(0,e.jsx)("rect",{width:4,height:4,fill:"#A5A5BA",rx:2})}),l=r}}]);
